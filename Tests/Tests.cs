/*
 * These unit tests are based on ScrapingHub's price-parser project.
 * See: https://github.com/scrapinghub/price-parser/blob/master/tests/test_price_parsing.py
 */

using DotnetPriceParser;
using NUnit.Framework;

namespace Tests
{
    public class Tests
    {

        private void assertIsExpectedPrice(
            string rawCurrencyHint,
            string rawPrice,
            string expectedCurrency,
            string expectedAmountText,
            double? expectedAmount,
            EDecimalSeparatorStyle decSepStyle = EDecimalSeparatorStyle.Unknown)
        {
            Price parsedPrice = Price.FromString(rawPrice, rawCurrencyHint: rawCurrencyHint, decSepStyle: decSepStyle);

            Assert.AreEqual(expectedCurrency, parsedPrice.Currency);
            Assert.AreEqual(expectedAmount, parsedPrice.Amount);
        }

        [SetUp]
        public void Setup()
        {
        }

        [Test]
        public void TestPriceExtraction_BugsCaught()
        {
            assertIsExpectedPrice(null, "US$:12.99", "US$", "12.99", 12.99);
            assertIsExpectedPrice("GBP", "34.992001", "GBP", "34.992001", 34.992001);
            assertIsExpectedPrice("GBP", "29.1583", "GBP", "29.1583", 29.1583);
            assertIsExpectedPrice(null, "1.11000000000000009770", null, "1.11000000000000009770", 1.11000000000000009770);
        }

        [Test]
        public void TestPriceExtraction_New()
        {
            assertIsExpectedPrice(null, "PTE 120 000 000", "PTE", "120 000 000", 120000000);
            assertIsExpectedPrice(null, "DEM 170 000", "DEM", "170 000", 170000);
            assertIsExpectedPrice(null, "₤1700.", "₤", "1700", 1700);
            assertIsExpectedPrice(null, "$ 1.144.000", "$", "1.144.000", 1144000);
            assertIsExpectedPrice(null, "A$190.00", "A$", "190.00", 190);
            assertIsExpectedPrice(null, "205,68 € 205.68", "€", "205,68", 205.68);
            assertIsExpectedPrice(null, "AED 8000 (USD 2179)", "AED", "8000", 8000);
            assertIsExpectedPrice(null, "13800 ₶", "₶", "13800", 13800);
            assertIsExpectedPrice(null, "12,000원", "원", "12,000", 12000);
            assertIsExpectedPrice(null, "3,500円", "円", "3,500", 3500);
        }

        [Test]
        public void TestPriceExtractionWithCurrencyHint_1()
        {
            assertIsExpectedPrice("90 728.00 руб 103 100.00 руб", "399 167.00 руб 420 176.16 руб", "руб", "399 167.00", 399167);
            assertIsExpectedPrice("45,00 zł", "45,00 zł", "zł", "45,00", 45);
            assertIsExpectedPrice("$", "$ 22.00", "$", "22.00", 22);
            assertIsExpectedPrice("$3.99", "$14.99", "$", "14.99", 14.99);
            assertIsExpectedPrice("Price:", "$11.95", "$", "11.95", 11.95);
            assertIsExpectedPrice("$19.95", "$19.95", "$", "19.95", 19.95);
            assertIsExpectedPrice("Price From £ 39.95", "39.95", "£", "39.95", 39.95);
            assertIsExpectedPrice("comprar", "R$260,00", "R$", "260,00", 260);
            assertIsExpectedPrice("$79.00", "$79.00", "$", "79.00", 79);
            assertIsExpectedPrice("34,50 € *", "34,50 € *", "€", "34,50", 34.5);
            assertIsExpectedPrice("35,70 €", "35,70 €", "€", "35,70", 35.7);
            assertIsExpectedPrice("Price", "$147.44", "$", "147.44", 147.44);
            assertIsExpectedPrice("Up to", "$4.70", "$", "4.70", 4.7);
            assertIsExpectedPrice("$999.99", "$924.99", "$", "924.99", 924.99);
            assertIsExpectedPrice("€", "690,00", "€", "690,00", 690);
            assertIsExpectedPrice("Cena", "Běžná cena 9 800 Kč", "Kč", "9 800", 9800);
            assertIsExpectedPrice("729,00 €", "479,00 €", "€", "479,00", 479);
            assertIsExpectedPrice("naše cena", "běžná cena 590 Kč", "Kč", "590", 590);
            assertIsExpectedPrice("Statt 249,00 EUR **", "249,00 EUR", "EUR", "249,00", 249);
            assertIsExpectedPrice("€13.95", "€13.95", "€", "13.95", 13.95);
            assertIsExpectedPrice("€36", "€89", "€", "89", 89);
            assertIsExpectedPrice("171900 руб.", "171900 руб.", "руб.", "171900", 171900);
            assertIsExpectedPrice("$1.06", "$0.31", "$", "0.31", 0.31);
            assertIsExpectedPrice("$45.49", "$45.49", "$", "45.49", 45.49);
            assertIsExpectedPrice("$", "28", "$", "28", 28);
            assertIsExpectedPrice("4.81 16 von 5", "4.81", null, "4.81", 4.81);
            assertIsExpectedPrice("CHF 86.00 *", "CHF 47.00 *", "CHF", "47.00", 47);
            assertIsExpectedPrice("320 руб. 400 руб.", "419 руб.", "руб.", "419", 419);
            assertIsExpectedPrice("129,99 €", "129,99 €", "€", "129,99", 129.99);
            assertIsExpectedPrice("Cena", "1,10 €", "€", "1,10", 1.1);
            assertIsExpectedPrice("Price:", "$559.00", "$", "559.00", 559);
            assertIsExpectedPrice("$49.99", "$49.99", "$", "49.99", 49.99);
            assertIsExpectedPrice("Price: $32.00", "$32.00", "$", "32.00", 32);
            assertIsExpectedPrice("Price (high to low)", "$699,000", "$", "699,000", 699000);
            assertIsExpectedPrice("€ 11.69", "€ 11.69", "€", "11.69", 11.69);
            assertIsExpectedPrice("100,00 руб.", "100,00", "руб.", "100,00", 100);
            assertIsExpectedPrice("€ 1", "17,35", "€", "17,35", 17.35);
            assertIsExpectedPrice("$19.95", "$19.95", "$", "19.95", 19.95);
            assertIsExpectedPrice("-", "£11.95", "£", "11.95", 11.95);
            assertIsExpectedPrice("грн.", "5 870", "грн.", "5 870", 5870);
            assertIsExpectedPrice("Price", "80 Kč", "Kč", "80", 80);
            assertIsExpectedPrice("€ 640,", "€ 610,", "€", "610", 610);
            assertIsExpectedPrice("Cena", "299 Kč", "Kč", "299", 299);
            assertIsExpectedPrice("1128240 рублей", "1128240 рублей", "руб", "1128240", 1128240);
            assertIsExpectedPrice("Now £9.99 $13.71 11,16 € £8.33 $13.71 9,30 €", "£9.99", "£", "9.99", 9.99);
            assertIsExpectedPrice("Free!", "Free!", null, "0", 0);
            assertIsExpectedPrice("49,96€", "49,96€", "€", "49,96", 49.96);
            assertIsExpectedPrice("SKU:", "$9.00", "$", "9.00", 9);
            assertIsExpectedPrice("£ 8.29", "8.29", "£", "8.29", 8.29);
            assertIsExpectedPrice("Р", "6 300 Р", "Р", "6 300", 6300);
            assertIsExpectedPrice("99,99 EUR (-30,00%) 69,99 EUR", "99,99 EUR", "EUR", "99,99", 99.99);
            assertIsExpectedPrice("Р", "1 890 Р", "Р", "1 890", 1890);
            assertIsExpectedPrice("Disposable Arts", "15,95 €", "€", "15,95", 15.95);
            assertIsExpectedPrice("zł", "16.00", "zł", "16.00", 16);
            assertIsExpectedPrice("£ 4.99", "4.99", "£", "4.99", 4.99);
            assertIsExpectedPrice("Price", "$119. 95", "$", "119. 95", 119.95);
            assertIsExpectedPrice("269 Kč", "269 Kč", "Kč", "269", 269);
            assertIsExpectedPrice(">", "13,30 €", "€", "13,30", 13.3);
            assertIsExpectedPrice("₪ 115", "₪98", "₪", "98", 98);
            assertIsExpectedPrice("80,00 €", "80,00 €", "€", "80,00", 80);
            assertIsExpectedPrice("33,95 €", "29,95 €", "€", "29,95", 29.95);
            assertIsExpectedPrice("£ 80.00", "80.00", "£", "80.00", 80);
            assertIsExpectedPrice("EUR", "€16.95", "€", "16.95", 16.95);
            assertIsExpectedPrice("DKK", "23,40", "DKK", "23,40", 23.4);
            assertIsExpectedPrice("Price: $ 34.44", "34.44", "$", "34.44", 34.44);
            assertIsExpectedPrice("Rp 31.500", "Rp 31.500", "Rp", "31.500", 31500);
            assertIsExpectedPrice("běžná cena 6,00 Kč", "běžná cena 6,00 Kč", "Kč", "6,00", 6);
            assertIsExpectedPrice("€", "19,59", "€", "19,59", 19.59);
            assertIsExpectedPrice("Out of stock", "2 285,81 грн.", "грн.", "2 285,81", 2285.81);
            assertIsExpectedPrice("$ 119,999", "$ 119,999", "$", "119,999", 119999);
            assertIsExpectedPrice("1,20 €", "1,20 €", "€", "1,20", 1.2);
            assertIsExpectedPrice("€ 1.99", "1.99", "€", "1.99", 1.99);
            assertIsExpectedPrice("Cena 283,50 PLN", "Cena 283,50 PLN", "PLN", "283,50", 283.5);
            assertIsExpectedPrice("SKU:", "99.99", null, "99.99", 99.99);
            assertIsExpectedPrice("$", "$ 979.00", "$", "979.00", 979);
            assertIsExpectedPrice("Cena 169,00 Kč", "169,00 Kč", "Kč", "169,00", 169);
            assertIsExpectedPrice("Р", "94,456 Р", "Р", "94,456", 94456);
            assertIsExpectedPrice("€", "180", "€", "180", 180);
            assertIsExpectedPrice("Savings: $0.90", "2.85", "$", "2.85", 2.85);
            assertIsExpectedPrice("฿ 3.3900", "฿ 3.3900", "฿", "3.3900", 3.39);
            assertIsExpectedPrice("5,90 €", "5,90 €", "€", "5,90", 5.90);
            assertIsExpectedPrice("1 930 р.", "1 030 р.", "р.", "1 030", 1030);
            assertIsExpectedPrice("$", "$ 22.00", "$", "22.00", 22);
            assertIsExpectedPrice("HUF", "39900", "HUF", "39900", 39900);
            assertIsExpectedPrice("59,00 €", "79,00 €", "€", "79,00", 79);
            assertIsExpectedPrice("(-38,23%)", "429,00 EUR", "EUR", "429,00", 429);
            assertIsExpectedPrice("302,44€ Χωρίς ΦΠΑ: 243,90€", "302,44€", "€", "302,44", 302.44);
            assertIsExpectedPrice("RENAULT", "129.900", null, "129.900", 129900);
            assertIsExpectedPrice("USD", "£54.17", "£", "54.17", 54.17);
            assertIsExpectedPrice("$3.00", "$3.00", "$", "3.00", 3);
            assertIsExpectedPrice("3,49 zł 1,75 zł", "3,49 zł 1,75 zł", "zł", "3,49", 3.49);
            assertIsExpectedPrice("59,90 EUR 599,00 EUR pro Kilogramm", "59,90 EUR", "EUR", "59,90", 59.9);
            assertIsExpectedPrice("Vanaf € 49.95", "Vanaf € 49.95", "€", "49.95", 49.95);
            assertIsExpectedPrice("$299.00", "$299.00", "$", "299.00", 299);
            assertIsExpectedPrice("€", "€30,40 **", "€", "30,40", 30.4);
            assertIsExpectedPrice("$59.99", "$59.99", "$", "59.99", 59.99);
            assertIsExpectedPrice("EUR", "2800", "EUR", "2800", 2800);
            assertIsExpectedPrice("225,00 € *", "225,00 € *", "€", "225,00", 225);
            assertIsExpectedPrice("17 940,00 руб", "17 940,00 руб", "руб", "17 940,00", 17940);
            assertIsExpectedPrice("159,50 €", "159,50 €", "€", "159,50", 159.5);
            assertIsExpectedPrice("£18.99", "£18.99", "£", "18.99", 18.99);
            assertIsExpectedPrice("2.999,00 EUR (-10,00%) 2.699,00 EUR", "699,00 EUR", "EUR", "699,00", 699);
            assertIsExpectedPrice("$", "45.33", "$", "45.33", 45.33);
            assertIsExpectedPrice("грн.", "33", "грн.", "33", 33);
            assertIsExpectedPrice("EUR", "16,50 €", "€", "16,50", 16.5);
            assertIsExpectedPrice("₫", "880,000 ₫", "₫", "880,000", 880000);
            assertIsExpectedPrice("руб.", "13.50", "руб.", "13.50", 13.5);
            assertIsExpectedPrice("336 р.", "336 р.", "р.", "336", 336);
            assertIsExpectedPrice("....", "200", null, "200", 200);
            assertIsExpectedPrice("Our Price:", "$860.00", "$", "860.00", 860);
            assertIsExpectedPrice("10 €", "10 €", "€", "10", 10);
            assertIsExpectedPrice("€", "13", "€", "13", 13);
            assertIsExpectedPrice("60,00 DKK", "60,00 DKK", "DKK", "60,00", 60);
            assertIsExpectedPrice("63,90 EUR", "63,90 EUR", "EUR", "63,90", 63.9);
            assertIsExpectedPrice("$", "$ 11.99", "$", "11.99", 11.99);
            assertIsExpectedPrice("25,00 €", "25,00 €", "€", "25,00", 25);
            assertIsExpectedPrice("Cena", "106,40 €", "€", "106,40", 106.4);
            assertIsExpectedPrice("EA", "$426.20/EA", "$", "426.20", 426.2);
            assertIsExpectedPrice("zł", "5.76", "zł", "5.76", 5.76);
            assertIsExpectedPrice("$4.50", "$4.50", "$", "4.50", 4.5);
            assertIsExpectedPrice("51090 M Фильтроэлемент OMEGA", "2 660 руб", "руб", "2 660", 2660);
            assertIsExpectedPrice("Р", "5 000 Р", "Р", "5 000", 5000);
            assertIsExpectedPrice("Add to Cart", "$4.60", "$", "4.60", 4.6);
            assertIsExpectedPrice("£14.99", "£14.99", "£", "14.99", 14.99);
            assertIsExpectedPrice("SKU:", "$150.00", "$", "150.00", 150);
            assertIsExpectedPrice("€", "70,31", "€", "70,31", 70.31);
            assertIsExpectedPrice("/", "$379", "$", "379", 379);
            assertIsExpectedPrice("€", "139,95", "€", "139,95", 139.95);
            assertIsExpectedPrice("Add to cart", "22,90 €", "€", "22,90", 22.9);
            assertIsExpectedPrice("94,99 zł", "94,99 zł", "zł", "94,99", 94.99);
            assertIsExpectedPrice("Price", "89.99", null, "89.99", 89.99);
            assertIsExpectedPrice("USD", "$4.00", "$", "4.00", 4);
            assertIsExpectedPrice("$", "Type of Transfer *", "$", null, null);
            assertIsExpectedPrice("Add to Order", "$892.00", "$", "892.00", 892);
            assertIsExpectedPrice("грн", "60800", "грн", "60800", 60800);
            assertIsExpectedPrice("zł", "1849.00", "zł", "1849.00", 1849);
            assertIsExpectedPrice("OK", "0,00 EUR", "EUR", "0,00", 0);
            assertIsExpectedPrice("руб.", "5 450 руб.", "руб.", "5 450", 5450);
            assertIsExpectedPrice("Price: $15.95/mo", "Price: $15.95/mo", "$", "15.95", 15.95);
            assertIsExpectedPrice("MX924 IX", "850 руб.", "руб.", "850", 850);
            assertIsExpectedPrice("6,000.00 руб. 5,500.00 руб.", "6,000.00 руб. 5,500.00 руб.", "руб.", "6,000.00", 6000);
            assertIsExpectedPrice("5.590,00 € *", "9.990,00 €", "€", "9.990,00", 9990);
            assertIsExpectedPrice("1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30", "$175.00", "$", "175.00", 175);
            assertIsExpectedPrice("Price", "$99.99", "$", "99.99", 99.99);
            assertIsExpectedPrice("€", "119,00", "€", "119,00", 119);
            assertIsExpectedPrice("$", "$ 11.96", "$", "11.96", 11.96);
            assertIsExpectedPrice("€", "9,94", "€", "9,94", 9.94);
            assertIsExpectedPrice("$69.00", "$69.00", "$", "69.00", 69);
            assertIsExpectedPrice("AQUAFINESSE", "AQUAFINESSE", null, null, null);
            assertIsExpectedPrice("£55.00", "£50.00", "£", "50.00", 50);
            assertIsExpectedPrice("$39.99", "$39.99", "$", "39.99", 39.99);
            assertIsExpectedPrice("65 000 руб. 75 000 руб.", "75 000 руб.", "руб.", "75 000", 75000);
            assertIsExpectedPrice("DKK/stk", "17,95", "DKK", "17,95", 17.95);
            assertIsExpectedPrice("841,00 zł", "841,00 zł – 995,00 zł", "zł", "841,00", 841);
            assertIsExpectedPrice("$", "$ 18.95", "$", "18.95", 18.95);
            assertIsExpectedPrice("9.0", "434", null, "434", 434);
            assertIsExpectedPrice("£14.50", "£21.00", "£", "21.00", 21);
            assertIsExpectedPrice("ab", "19,90 €", "€", "19,90", 19.9);
            assertIsExpectedPrice("30 руб", "30 руб", "руб", "30", 30);
            assertIsExpectedPrice("€", "684,25", "€", "684,25", 684.25);
            assertIsExpectedPrice("€ 125.00", "€ 45.00", "€", "45.00", 45);
            assertIsExpectedPrice("ht / L'unité", "17.90", null, "17.90", 17.9);
            assertIsExpectedPrice("$0.00", "$0.00", "$", "0.00", 0);
            assertIsExpectedPrice("49 Kč", "49 Kč", "Kč", "49", 49);
            assertIsExpectedPrice("Cena 685,00 Kč", "1 995,00 Kč", "Kč", "1 995,00", 1995);
            assertIsExpectedPrice("€ 2,99", "€ 2,99", "€", "2,99", 2.99);
            assertIsExpectedPrice("Cкидка до 10% от цены купона", "475 руб.", "руб.", "475", 475);
            assertIsExpectedPrice("€", "11,76", "€", "11,76", 11.76);
            assertIsExpectedPrice("$99.99", "$99.99", "$", "99.99", 99.99);
            assertIsExpectedPrice("1 298,00 €", "1 298,00 €", "€", "1 298,00", 1298.00);
            assertIsExpectedPrice("$1 298,00", "$1 298,00", "$", "1 298,00", 1298.00);
            assertIsExpectedPrice("1 298,00", "1 298,00", null, "1 298,00", 1298.00);
            assertIsExpectedPrice(null, ".75 €", "€", ".75", 0.75);
            assertIsExpectedPrice("$.75", "$.75", "$", ".75", 0.75);
            assertIsExpectedPrice("$..75", "$..75", "$", ".75", 0.75);
            assertIsExpectedPrice("$.75,333", "$.75,333", "$", ".75,333", 75333);
            assertIsExpectedPrice("$.750.30", "$.750.30", "$", "750.30", 750.30);
            assertIsExpectedPrice("i", "i", null, null, null);
        }

        [Test]
        public void TestPriceExtractionWithCurrencyHint_2()
        {
            assertIsExpectedPrice("7,99 €", "7,99 €", "€", "7,99", 7.99);
            assertIsExpectedPrice("2 Piece - $6.75 2 Piece - $6.75", "$6.75", "$", "6.75", 6.75);
            assertIsExpectedPrice("£7", "£24.99", "£", "24.99", 24.99);
            assertIsExpectedPrice("23,00 €", "23,00 €", "€", "23,00", 23.00);
            assertIsExpectedPrice("€", "bežná cena 12,96 €", "€", "12,96", 12.96);
            assertIsExpectedPrice("$", "3,20 €", "€", "3,20", 3.2);
            assertIsExpectedPrice("€ 2.109,00", "€ 2.109,00", "€", "2.109,00", 2109);
            assertIsExpectedPrice("руб.", "32690", "руб.", "32690", 32690);
            assertIsExpectedPrice(": 3 250 000 €", ": 3 250 000 €", "€", "3 250 000", 3250000);
            assertIsExpectedPrice("$20.00", "$20.00", "$", "20.00", 20);
            assertIsExpectedPrice("Цена:", "950 грн.", "грн.", "950", 950);
            assertIsExpectedPrice("TTC", "149,00", null, "149,00", 149.00);
            assertIsExpectedPrice("A partire da 9,08 €", "166,81 € iva inclusa", "€", "166,81", 166.81);
            assertIsExpectedPrice("EUR", "679.00", "EUR", "679.00", 679.00);
            assertIsExpectedPrice("10,50 € 10,50 €", "10,50 €", "€", "10,50", 10.50);
            assertIsExpectedPrice("2,20 € *", "2,20 € *", "€", "2,20", 2.2);
            assertIsExpectedPrice("€", "€ 10.00 € 8.00 – € 10.00", "€", "10.00", 10);
            assertIsExpectedPrice("Bestellen", "€16,95", "€", "16,95", 16.95);
            assertIsExpectedPrice("$", "$ 95.00", "$", "95.00", 95.00);
            assertIsExpectedPrice("Р", "1 400 Р", "Р", "1 400", 1400);
            assertIsExpectedPrice("£", "£ 15.00", "£", "15.00", 15);
            assertIsExpectedPrice("Price: $119.00", "$119.00", "$", "119.00", 119);
            assertIsExpectedPrice("50,- Kč", "50,- Kč", "Kč", "50", 50);
            assertIsExpectedPrice("What is this?", "$25.95", "$", "25.95", 25.95);
            assertIsExpectedPrice("$29.99 Excluding Sales Tax in Illinois", "$29.99", "$", "29.99", 29.99);
            assertIsExpectedPrice("ID:", "125,00 zł", "zł", "125,00", 125);
            assertIsExpectedPrice("Offer Price: Rs 1,306.14", "Rs 3,600.00", "Rs", "3,600.00", 3600);
            assertIsExpectedPrice("29 RON", "29 RON", "RON", "29", 29);
            assertIsExpectedPrice("Р", "2 690 Р", "Р", "2 690", 2690);
            assertIsExpectedPrice("$134.96", "$134.96", "$", "134.96", 134.96);
            assertIsExpectedPrice("362,68 € χωρίς Φ.Π.Α", "449,72 €", "€", "449,72", 449.72);
            assertIsExpectedPrice("MSRP: $588.00", "499.80", "$", "499.80", 499.80);
            assertIsExpectedPrice("15.00 €", "15.00 €", "€", "15.00", 15);
            assertIsExpectedPrice("Цена: от 2 750 руб.", "2 750 руб.", "руб.", "2 750", 2750);
            assertIsExpectedPrice("P.V.P. 4,56 €", "P.V.P. 4,56 €", "€", "4,56", 4.56);
            assertIsExpectedPrice("SPECIAL Add to Cart for Price", "$40.00", "$", "40.00", 40);
            assertIsExpectedPrice("2,90 €", "2,90", "€", "2,90", 2.9);
            assertIsExpectedPrice("Цена: 19 000 руб.", "Цена: 19 000 руб.", "руб.", "19 000", 19000);
            assertIsExpectedPrice("COMMANDER", "184,20 €HT", "€", "184,20", 184.2);
            assertIsExpectedPrice("Цена: 1 849 руб.", "1 849 руб.", "руб.", "1 849", 1849);
            assertIsExpectedPrice("€", "12,00", "€", "12,00", 12);
            assertIsExpectedPrice("Discounted Price £ 205.99", "205.99", "£", "205.99", 205.99);
            assertIsExpectedPrice("SKU", "No longer available", null, null, null);
            assertIsExpectedPrice("€14.90", "€69.90", "€", "69.90", 69.9);
            assertIsExpectedPrice("руб.", "876 руб.", "руб.", "876", 876);
            assertIsExpectedPrice("$79.95", "$79.95", "$", "79.95", 79.95);
            assertIsExpectedPrice("3,990 Ft 2,990 Ft", "3,990 Ft", "Ft", "3,990", 3990);
            assertIsExpectedPrice("Cena 298,00 Kč", "288,00 Kč", "Kč", "288,00", 288);
            assertIsExpectedPrice("Pris NOK 899,00", "899,00", "NOK", "899,00", 899);
            assertIsExpectedPrice("50,00 €", "50,00 €", "€", "50,00", 50);
            assertIsExpectedPrice("59,99 €", "54,99 €", "€", "54,99", 54.99);
            assertIsExpectedPrice("EAN", "139,00 € *", "€", "139,00", 139);
            assertIsExpectedPrice("Now", "238.00", null, "238.00", 238);
            assertIsExpectedPrice("(You save $15.01)", "$119.99", "$", "119.99", 119.99);
            assertIsExpectedPrice("Item #:", "$ 99.95", "$", "99.95", 99.95);
            assertIsExpectedPrice("UK:", "£14.99", "£", "14.99", 14.99);
            assertIsExpectedPrice("р.", "150", "р.", "150", 150);
            assertIsExpectedPrice("12x de R$ 44,00 sem juros", "R$ 528,00", "R$", "528,00", 528);
            assertIsExpectedPrice("€", "14,90", "€", "14,90", 14.9);
            assertIsExpectedPrice("5 290 Kč s DPH", "5 290 Kč", "Kč", "5 290", 5290);
            assertIsExpectedPrice("(Out of Stock)", "39.95", null, "39.95", 39.95);
            assertIsExpectedPrice("₪370", "₪370", "₪", "370", 370);
            assertIsExpectedPrice("HUF", "39000", "HUF", "39000", 39000);
            assertIsExpectedPrice("Kč", "1 995 Kč", "Kč", "1 995", 1995);
            assertIsExpectedPrice("C$5.95", "C$5.95", "C$", "5.95", 5.95);
            assertIsExpectedPrice("руб.", "22800.00", "руб.", "22800.00", 22800);
            assertIsExpectedPrice("Cena", "359 Kč", "Kč", "359", 359);
            assertIsExpectedPrice("Nuestro precio", "189,00 €", "€", "189,00", 189);
            assertIsExpectedPrice("PLN", "179.62", "PLN", "179.62", 179.62);
            assertIsExpectedPrice("€", "145,79", "€", "145,79", 145.79);
            assertIsExpectedPrice("$", "$ 695.00", "$", "695.00", 695);
            assertIsExpectedPrice("Р", "2 999 Р", "Р", "2 999", 2999);
            assertIsExpectedPrice("6,50 € *", "6,50", "€", "6,50", 6.50);
            assertIsExpectedPrice("Price: $61.00", "$61.00", "$", "61.00", 61.00);
            assertIsExpectedPrice("Pris NOK 1 999,00", "5 799,00", "NOK", "5 799,00", 5799);
            assertIsExpectedPrice("7,31 €", "7,31 €", "€", "7,31", 7.31);
            assertIsExpectedPrice("53,20 €", "53,20 €", "€", "53,20", 53.20);
            assertIsExpectedPrice("Cena", "668 Kč", "Kč", "668", 668);
            assertIsExpectedPrice("€ 28,25", "€ 27,95", "€", "27,95", 27.95);
            assertIsExpectedPrice("From", "From $109.90", "$", "109.90", 109.9);
            assertIsExpectedPrice("Unit Price: $4.75", "$4.75", "$", "4.75", 4.75);
            assertIsExpectedPrice("Więcej", "14,90 zł", "zł", "14,90", 14.90);
            assertIsExpectedPrice("$23.00", "$23.00", "$", "23.00", 23);
            assertIsExpectedPrice("€ 0.00", "€ 33.00", "€", "33.00", 33);
            assertIsExpectedPrice("Zľava 36 €", "78 €", "€", "78", 78);
            assertIsExpectedPrice("£", "5.00", "£", "5.00", 5);
            assertIsExpectedPrice("€", "29,90", "€", "29,90", 29.9);
            assertIsExpectedPrice("Р", "860 Р", "Р", "860", 860);
            assertIsExpectedPrice("60,55 €", "60,55 €", "€", "60,55", 60.55);
            assertIsExpectedPrice("€", "129.00", "€", "129.00", 129);
            assertIsExpectedPrice("£13.50", "£13.50", "£", "13.50", 13.50);
            assertIsExpectedPrice("SKU:", "$39.99", "$", "39.99", 39.99);
            assertIsExpectedPrice("Disponibilidade: Pronta entrega R$60,00 até 2x de R$30,00", "R$60,00", "R$", "60,00", 60);
            assertIsExpectedPrice("67,99 €", "64,59 €", "€", "64,59", 64.59);
            assertIsExpectedPrice("€ 9,90", "€ 13,50", "€", "13,50", 13.50);
            assertIsExpectedPrice("Р", "30 Р", "Р", "30", 30);
            assertIsExpectedPrice("€", "€ 139.00", "€", "139.00", 139);
            assertIsExpectedPrice("There are 163 products.", "From 26 to 50 €", "€", "26", 26);
            assertIsExpectedPrice("Pris NOK 1 999,00", "139,00", "NOK", "139,00", 139);
            assertIsExpectedPrice("/sqft", "1.52", null, "1.52", 1.52);
            assertIsExpectedPrice("$4.95", "$4.95", "$", "4.95", 4.95);
            assertIsExpectedPrice("$38", "$12", "$", "12", 12);
            assertIsExpectedPrice("Cena 4.10 €", "4.10", "€", "4.10", 4.1);
            assertIsExpectedPrice("руб.", "590", "руб.", "590", 590);
            assertIsExpectedPrice("€", "99,90", "€", "99,90", 99.9);
            assertIsExpectedPrice("9,50 EUR", "9,50 EUR", "EUR", "9,50", 9.50);
            assertIsExpectedPrice("$74.99", "$74.99", "$", "74.99", 74.99);
            assertIsExpectedPrice("$", "$ 3.22", "$", "3.22", 3.22);
            assertIsExpectedPrice("£", "3,301.00 £", "£", "3,301.00", 3301);
            assertIsExpectedPrice("41,78 EUR", "41,78 EUR", "EUR", "41,78", 41.78);
            assertIsExpectedPrice("44,50 EUR", "44,50 EUR", "EUR", "44,50", 44.50);
            assertIsExpectedPrice("£4.00", "£4.00", "£", "4.00", 4);
            assertIsExpectedPrice("Р", "7 390 Р", "Р", "7 390", 7390);
            assertIsExpectedPrice("eMail", "34.99€", "€", "34.99", 34.99);
            assertIsExpectedPrice("€", "12,99", "€", "12,99", 12.99);
            assertIsExpectedPrice("RRP: £ 180.00", "149.00", "£", "149.00", 149);
            assertIsExpectedPrice("9.00 руб.", "27.00 руб.", "руб.", "27.00", 27);
            assertIsExpectedPrice("Price: $19.95", "$7.95", "$", "7.95", 7.95);
            assertIsExpectedPrice("$16,500", "$16,500", "$", "16,500", 16500);
            assertIsExpectedPrice("•", "$59.99", "$", "59.99", 59.99);
            assertIsExpectedPrice("USD", "349.95", "USD", "349.95", 349.95);
            assertIsExpectedPrice("35€ 99 dont 0,02 € d'éco - part", "35€ 99", "€", "35€99", 35.99);
            assertIsExpectedPrice("5,72 €", "5,72 €", "€", "5,72", 5.72);
            assertIsExpectedPrice("199,00 грн.", "199,00 грн.", "грн.", "199,00", 199);
            assertIsExpectedPrice("£4.07", "£4.07", "£", "4.07", 4.07);
            assertIsExpectedPrice("$15.00", "$15.00", "$", "15.00", 15);
            assertIsExpectedPrice("€", "20.00", "€", "20.00", 20);
            assertIsExpectedPrice("€", "14.50", "€", "14.50", 14.5);
            assertIsExpectedPrice("DKK", "59,00", "DKK", "59,00", 59);
            assertIsExpectedPrice("9 472 Ft", "9 472 Ft", "Ft", "9 472", 9472);
            assertIsExpectedPrice("Cena", "95 Kč", "Kč", "95", 95);
            assertIsExpectedPrice("tax excl.", "€ 0,00", "€", "0,00", 0);
            assertIsExpectedPrice("TL", "69,50", "TL", "69,50", 69.5);
            assertIsExpectedPrice("Price", "Rp 169.000", "Rp", "169.000", 169000);
            assertIsExpectedPrice("En stock", "4,50 €", "€", "4,50", 4.50);
            assertIsExpectedPrice("$183.00", "$145.00", "$", "145.00", 145);
            assertIsExpectedPrice("£", "11.70", "£", "11.70", 11.7);
            assertIsExpectedPrice("25,13 €", "25,13 €", "€", "25,13", 25.13);
            assertIsExpectedPrice("58,00 zł", "58,00 zł", "zł", "58,00", 58);
            assertIsExpectedPrice("€", "15,55", "€", "15,55", 15.55);
            assertIsExpectedPrice("Prezzo SVB: 19,95 €", "Prezzo SVB: 19,95 €", "€", "19,95", 19.95);
            assertIsExpectedPrice("In stock", "$185.00", "$", "185.00", 185);
            assertIsExpectedPrice("18 €", "18 €", "€", "18", 18);
            assertIsExpectedPrice("0€", "0 €", "€", "0", 0);
            assertIsExpectedPrice("*", "9,41 €", "€", "9,41", 9.41);
            assertIsExpectedPrice("грн.", "1 075", "грн.", "1 075", 1075);
            assertIsExpectedPrice("More", "$22.99", "$", "22.99", 22.99);
            assertIsExpectedPrice("Р", "9 282 Р", "Р", "9 282", 9282);
            assertIsExpectedPrice("RM5", "RM50", "RM", "50", 50);
            assertIsExpectedPrice("7,60 €", "7,60 €", "€", "7,60", 7.6);
            assertIsExpectedPrice("$", "0.00", "$", "0.00", 0);
            assertIsExpectedPrice(". AMOSTRA .", "R$ 6,00", "R$", "6,00", 6);
            assertIsExpectedPrice("5 833,00 € -5% 6 140,00 € Tasse incl. IVA 4%", "5 833,00 €", "€", "5 833,00", 5833);
            assertIsExpectedPrice("€ 26,95", "€ 26,95", "€", "26,95", 26.95);
            assertIsExpectedPrice("35,00 €", "35,00 €", "€", "35,00", 35);
            assertIsExpectedPrice("Р", "2 500 Р", "Р", "2 500", 2500);
            assertIsExpectedPrice("499,00 €", "499,00 €", "€", "499,00", 499);
            assertIsExpectedPrice("руб.", "1 120 900", "руб.", "1 120 900", 1120900);
            assertIsExpectedPrice("125,00 125,00 €", "125,00", "€", "125,00", 125);
            assertIsExpectedPrice("₽", "7362", "₽", "7362", 7362);
            assertIsExpectedPrice("SKU:", "€12.99", "€", "12.99", 12.99);
            assertIsExpectedPrice("р.", "600", "р.", "600", 600);
            assertIsExpectedPrice("79,50 €", "29,90€", "€", "29,90", 29.9);
            assertIsExpectedPrice("$150.00", "$150.00", "$", "150.00", 150);
            assertIsExpectedPrice("Р", "1 987 Р", "Р", "1 987", 1987);
            assertIsExpectedPrice("€69.00", "€69.00", "€", "69.00", 69);
            assertIsExpectedPrice("USD", "280", "USD", "280", 280);
            assertIsExpectedPrice("Rabatt", "6 450,00", null, "6 450,00", 6450);
            assertIsExpectedPrice("SKU:", "$178.00", "$", "178.00", 178);
            assertIsExpectedPrice("$", "$ 300.00", "$", "300.00", 300);
            assertIsExpectedPrice("0€", "19,1€", "€", "19,1", 19.1);
            assertIsExpectedPrice("R$49,90", "R$49,90", "R$", "49,90", 49.9);
            assertIsExpectedPrice("En stock", "790,00 € HT", "€", "790,00", 790);
            assertIsExpectedPrice("Cena", "Cena 14,79 €", "€", "14,79", 14.79);
            assertIsExpectedPrice("For Sale", "$395,000", "$", "395,000", 395000);
            assertIsExpectedPrice("€", "10.14", "€", "10.14", 10.14);
            assertIsExpectedPrice("₫", "5.00 trên 5", "₫", "5.00", 5);
            assertIsExpectedPrice("$ 599.00", "549.00", "$", "549.00", 549);
            assertIsExpectedPrice("$19", "$19", "$", "19", 19);
            assertIsExpectedPrice("$210", "$210", "$", "210", 210);
            assertIsExpectedPrice("$", "$ 79.95", "$", "79.95", 79.95);
            assertIsExpectedPrice("руб.", "279 000", "руб.", "279 000", 279000);
            assertIsExpectedPrice("2 390 €", "2 390 €", "€", "2 390", 2390);
            assertIsExpectedPrice("$", "$ 281.40 $ 265.70", "$", "281.40", 281.4);
            assertIsExpectedPrice("3200 руб. 1500 руб.", "3200 руб. 1500 руб.", "руб.", "3200", 3200);
            assertIsExpectedPrice("$1,299.00", "$999.00", "$", "999.00", 999);
            assertIsExpectedPrice("15,00 Kč", "15,00 Kč", "Kč", "15,00", 15);
            assertIsExpectedPrice("€", "€ 20.70", "€", "20.70", 20.7);
            assertIsExpectedPrice("out of stock", "30.00", null, "30.00", 30);
            assertIsExpectedPrice("220,00 €", "398,00 €", "€", "398,00", 398);
            assertIsExpectedPrice("£94.50 GBP", "£94.50 GBP", "£", "94.50", 94.5);
            assertIsExpectedPrice("5 427 Kč", "5 427 Kč", "Kč", "5 427", 5427);
            assertIsExpectedPrice("$ 24.99", "$ 24.99", "$", "24.99", 24.99);
            assertIsExpectedPrice("£ 2.00", "2.00", "£", "2.00", 2);
            assertIsExpectedPrice(">", "10,00 €", "€", "10,00", 10);
            assertIsExpectedPrice("32,50 EUR", "32,50 EUR", "EUR", "32,50", 32.5);
            assertIsExpectedPrice("In stock", "Rs1,599.00", "Rs", "1,599.00", 1599);
            assertIsExpectedPrice("$", "14.95", "$", "14.95", 14.95);
            assertIsExpectedPrice("RRP: £ 49.99", "42.90", "£", "42.90", 42.9);
            assertIsExpectedPrice("Rs206.00 Rs164.00 SAVE 20%", "Rs164.00", "Rs", "164.00", 164);
            assertIsExpectedPrice("Price:", "$6,200.00", "$", "6,200.00", 6200);
            assertIsExpectedPrice("PLN", "69.99", "PLN", "69.99", 69.99);
            assertIsExpectedPrice("€", "48,39", "€", "48,39", 48.39);
            assertIsExpectedPrice("1.350.000", "320.000", null, "320.000", 320000);
            assertIsExpectedPrice("1.650,00 € *", "2.130,00 €", "€", "2.130,00", 2130);
            assertIsExpectedPrice("£537.00", "£179.00", "£", "179.00", 179);
            assertIsExpectedPrice("SKU:", "$39.99", "$", "39.99", 39.99);
            assertIsExpectedPrice("SGD$4.90", "SGD$4.90", "SGD", "4.90", 4.9);
            assertIsExpectedPrice("SGD4.90 $", "SGD4.90 $", "SGD", "4.90", 4.9);
            assertIsExpectedPrice("$ SGD4.90", "$ SGD4.90", "SGD", "4.90", 4.9);
        }

        [Test]
        public void TestPriceExtractionWithNoPrice()
        {
            assertIsExpectedPrice("EUR", null, "EUR", null, null);
            assertIsExpectedPrice("Kč", null, "Kč", null, null);
            assertIsExpectedPrice("50", null, null, null, null);
            assertIsExpectedPrice(">", null, null, null, null);
            assertIsExpectedPrice("REI", null, null, null, null);
            assertIsExpectedPrice("rate", null, null, null, null);
        }

        [Test]
        public void TestPriceExtractionWithNoCurrencyHint()
        {
            assertIsExpectedPrice(null, "67", null, "67", 67);
            assertIsExpectedPrice(null, "naša cena 67,30 €", "€", "67,30", 67.30);
            assertIsExpectedPrice(null, "EUR29.66 (inc VAT 20% - UK & EEC) EUR24.71 (exc VAT 20% - UK & EEC)", "EUR", "29.66", 29.66);
            assertIsExpectedPrice(null, "17,00 €", "€", "17,00", 17);
            assertIsExpectedPrice(null, "0,29 € + iva", "€", "0,29", 0.29);
            assertIsExpectedPrice(null, "39,00 €", "€", "39,00", 39);
            assertIsExpectedPrice(null, "24,00 Kč", "Kč", "24,00", 24);
            assertIsExpectedPrice(null, "běžná cena 7 940 Kč", "Kč", "7 940", 7940);
            assertIsExpectedPrice(null, "$46.00", "$", "46.00", 46.00);
            assertIsExpectedPrice(null, "$9.99 & Under", "$", "9.99", 9.99);
            assertIsExpectedPrice(null, "běžná cena 459,00 Kč", "Kč", "459,00", 459);
            assertIsExpectedPrice(null, "$60.00", "$", "60.00", 60);
            assertIsExpectedPrice(null, "0,82 €", "€", "0,82", 0.82);
            assertIsExpectedPrice(null, "599 Kč", "Kč", "599", 599);
            assertIsExpectedPrice(null, "€10.90", "€", "10.90", 10.90);
            assertIsExpectedPrice(null, "299,00 EUR", "EUR", "299,00", 299);
            assertIsExpectedPrice(null, "naša cena 21,95 €", "€", "21,95", 21.95);
            assertIsExpectedPrice(null, "343,05 €", "€", "343,05", 343.05);
            assertIsExpectedPrice(null, "1 139,00 €", "€", "1 139,00", 1139);
            assertIsExpectedPrice(null, "157,000 تومان", "تومان", "157,000", 157000);
            assertIsExpectedPrice(null, "35.00", null, "35.00", 35);
            assertIsExpectedPrice(null, "8.000.000 ₫", "₫", "8.000.000", 8000000);
            assertIsExpectedPrice(null, "6790 Dinara", "Dinara", "6790", 6790);
            assertIsExpectedPrice(null, "3.99", null, "3.99", 3.99);
            assertIsExpectedPrice(null, "£ 165.00", "£", "165.00", 165.00);
            assertIsExpectedPrice(null, "$844,900", "$", "844,900", 844900);
            assertIsExpectedPrice(null, "140,00 pln", "pln", "140,00", 140);
            assertIsExpectedPrice(null, "2,99 €", "€", "2,99", 2.99);
            assertIsExpectedPrice(null, "145,00 lei", "lei", "145,00", 145);
            assertIsExpectedPrice(null, "3,90 €", "€", "3,90", 3.90);
            assertIsExpectedPrice(null, "$149.99", "$", "149.99", 149.99);
            assertIsExpectedPrice(null, "4,30 €", "€", "4,30", 4.30);
            assertIsExpectedPrice(null, "$36.95", "$", "36.95", 36.95);
            assertIsExpectedPrice(null, "2 499,00 zł", "zł", "2 499,00", 2499);
            assertIsExpectedPrice(null, "800 руб.", "руб.", "800", 800);
            assertIsExpectedPrice(null, "89.00", null, "89.00", 89);
            assertIsExpectedPrice(null, "3 100р.", "р.", "3 100", 3100);
            assertIsExpectedPrice(null, "0,85 €", "€", "0,85", 0.85);
            assertIsExpectedPrice(null, "35,95 €", "€", "35,95", 35.95);
            assertIsExpectedPrice(null, "$0.42", "$", "0.42", 0.42);
            assertIsExpectedPrice(null, "80,000 تومان", "تومان", "80,000", 80000);
            assertIsExpectedPrice(null, "550,00 € *", "€", "550,00", 550);
            assertIsExpectedPrice(null, "25,00 zł", "zł", "25,00", 25);
            assertIsExpectedPrice(null, "17,45 EUR", "EUR", "17,45", 17.45);
            assertIsExpectedPrice(null, "49,00 €", "€", "49,00", 49);
            assertIsExpectedPrice(null, "169.00", null, "169.00", 169);
            assertIsExpectedPrice(null, "8,99 €", "€", "8,99", 8.99);
            assertIsExpectedPrice(null, "1 099 Kč", "Kč", "1 099", 1099);
            assertIsExpectedPrice(null, "17.99", null, "17.99", 17.99);
            assertIsExpectedPrice(null, "$274.95", "$", "274.95", 274.95);
            assertIsExpectedPrice(null, "70,20 €", "€", "70,20", 70.20);
            assertIsExpectedPrice(null, "289,00 zł", "zł", "289,00", 289);
            assertIsExpectedPrice(null, "18,00 €", "€", "18,00", 18);
            assertIsExpectedPrice(null, "12,00 €", "€", "12,00", 12);
            assertIsExpectedPrice(null, "$19.97", "$", "19.97", 19.97);
            //assertIsExpectedPrice(null, "(save $2.95)", "$", null, null);
            assertIsExpectedPrice(null, "749,00 euro", "euro", "749,00", 749);
            assertIsExpectedPrice(null, "$48.25", "$", "48.25", 48.25);
            assertIsExpectedPrice(null, "5.00", null, "5.00", 5.00);
            assertIsExpectedPrice(null, "18,00 € *", "€", "18,00", 18);
            assertIsExpectedPrice(null, "$3.00", "$", "3.00", 3.00);
            assertIsExpectedPrice(null, "1,85 EUR", "EUR", "1,85", 1.85);
            assertIsExpectedPrice(null, "4.25", null, "4.25", 4.25);
            assertIsExpectedPrice(null, "£1.20", "£", "1.20", 1.20);
            assertIsExpectedPrice(null, "$196.50", "$", "196.50", 196.50);
            assertIsExpectedPrice(null, "Price: $129.00", "$", "129.00", 129.00);
            assertIsExpectedPrice(null, "179,00 €", "€", "179,00", 179.00);
            assertIsExpectedPrice(null, "$80.00", "$", "80.00", 80.00);
            assertIsExpectedPrice(null, "14.50", null, "14.50", 14.50);
            assertIsExpectedPrice(null, "From $ 24.95", "$", "24.95", 24.95);
            assertIsExpectedPrice(null, "$5.11", "$", "5.11", 5.11);
            assertIsExpectedPrice(null, "EUR 6,99", "EUR", "6,99", 6.99);
            assertIsExpectedPrice(null, "40% OFF", null, null, null);
            assertIsExpectedPrice(null, "29.99", null, "29.99", 29.99);
            assertIsExpectedPrice(null, "14.00€", "€", "14.00", 14.00);
            assertIsExpectedPrice(null, "22.00", null, "22.00", 22.00);
            assertIsExpectedPrice(null, "$1000.00", "$", "1000.00", 1000.00);
            assertIsExpectedPrice(null, "$12.95", "$", "12.95", 12.95);
            assertIsExpectedPrice(null, "běžná cena 987,20 Kč", "Kč", "987,20", 987.20);
            assertIsExpectedPrice(null, "104,64 zł", "zł", "104,64", 104.64);
            assertIsExpectedPrice(null, "163,80 €", "€", "163,80", 163.80);
            assertIsExpectedPrice(null, "$89.00", "$", "89.00", 89.00);
            assertIsExpectedPrice(null, "1 600 руб.", "руб.", "1 600", 1600);
            assertIsExpectedPrice(null, "20,95 € *", "€", "20,95", 20.95);
            assertIsExpectedPrice(null, "9,50 €", "€", "9,50", 9.50);
            assertIsExpectedPrice(null, "170,00 €", "€", "170,00", 170);
            assertIsExpectedPrice(null, "170,00€", "€", "170,00", 170);
            assertIsExpectedPrice(null, "6.00", null, "6.00", 6.00);
            assertIsExpectedPrice(null, "$24.00", "$", "24.00", 24.00);
            assertIsExpectedPrice(null, "9.95", null, "9.95", 9.95);
            assertIsExpectedPrice(null, "34.12 (40.94 inc VAT)", null, "34.12", 34.12);
            assertIsExpectedPrice(null, "Rp 350.000", "Rp", "350.000", 350000);
            assertIsExpectedPrice(null, "$55.00", "$", "55.00", 55.00);
            assertIsExpectedPrice(null, "$595.00", "$", "595.00", 595.00);
            assertIsExpectedPrice(null, "7,00 €", "€", "7,00", 7);
            assertIsExpectedPrice(null, "119.95", null, "119.95", 119.95);
            assertIsExpectedPrice(null, "1.95", null, "1.95", 1.95);
            assertIsExpectedPrice(null, "390,00 €", "€", "390,00", 390);
            assertIsExpectedPrice(null, "3.24", null, "3.24", 3.24);
            assertIsExpectedPrice(null, "12 590 Kč", "Kč", "12 590", 12590);
            assertIsExpectedPrice(null, "330 Kč", "Kč", "330", 330);
            assertIsExpectedPrice(null, "8 500 руб.", "руб.", "8 500", 8500);
            assertIsExpectedPrice(null, "589,00 €", "€", "589,00", 589);
            assertIsExpectedPrice(null, "1,099.99", null, "1,099.99", 1099.99);
            assertIsExpectedPrice(null, "14 196 Р", "Р", "14 196", 14196);
            assertIsExpectedPrice(null, "19.00", null, "19.00", 19.00);
            assertIsExpectedPrice(null, "870 Kč", "Kč", "870", 870);
            assertIsExpectedPrice(null, "59,00 €", "€", "59,00", 59);
            assertIsExpectedPrice(null, "Pris från 172 kr", "kr", "172", 172);
            assertIsExpectedPrice(null, "1 573 Kč", "Kč", "1 573", 1573);
            assertIsExpectedPrice(null, "$2.99", "$", "2.99", 2.99);
            assertIsExpectedPrice(null, "13,90 €", "€", "13,90", 13.90);
            assertIsExpectedPrice(null, "29.95", null, "29.95", 29.95);
            assertIsExpectedPrice(null, "/", null, null, null);
            assertIsExpectedPrice(null, "16,90 €", "€", "16,90", 16.90);
            assertIsExpectedPrice(null, "149.95", null, "149.95", 149.95);
            assertIsExpectedPrice(null, "8.90", null, "8.90", 8.90);
            assertIsExpectedPrice(null, "419", null, "419", 419);
            assertIsExpectedPrice(null, "$50.00", "$", "50.00", 50.00);
            assertIsExpectedPrice(null, "3 291,00 €", "€", "3 291,00", 3291);
            assertIsExpectedPrice(null, "13,00 €", "€", "13,00", 13);
            assertIsExpectedPrice(null, "DKK 449,00", "DKK", "449,00", 449);
            assertIsExpectedPrice(null, "$20.00", "$", "20.00", 20.00);
            assertIsExpectedPrice(null, "$154", "$", "154", 154);
            assertIsExpectedPrice(null, "22.48", null, "22.48", 22.48);
            assertIsExpectedPrice(null, "20,00 EUR", "EUR", "20,00", 20);
            assertIsExpectedPrice(null, "73,460 €", "€", "73,460", 73460);
            assertIsExpectedPrice(null, "850 руб", "руб", "850", 850);
            assertIsExpectedPrice(null, "$14.99", "$", "14.99", 14.99);
            assertIsExpectedPrice(null, "$79.95", "$", "79.95", 79.95);
            assertIsExpectedPrice(null, "40,00 €", "€", "40,00", 40);
            assertIsExpectedPrice(null, "149,98 €", "€", "149,98", 149.98);
            assertIsExpectedPrice(null, "1 150 грн.", "грн.", "1 150", 1150);
            assertIsExpectedPrice(null, "399.00", null, "399.00", 399.00);
            assertIsExpectedPrice(null, "33,90 €", "€", "33,90", 33.90);
            assertIsExpectedPrice(null, "79,50 €", "€", "79,50", 79.50);
            assertIsExpectedPrice(null, "40 130", null, "40 130", 40130);
            assertIsExpectedPrice(null, "$69.99", "$", "69.99", 69.99);
            assertIsExpectedPrice(null, "1 090 Kč", "Kč", "1 090", 1090);
            assertIsExpectedPrice(null, "395 Kč", "Kč", "395", 395);
            assertIsExpectedPrice(null, "53,95 €", "€", "53,95", 53.95);
            assertIsExpectedPrice(null, "£0.99", "£", "0.99", 0.99);
            assertIsExpectedPrice(null, "5,60 € *", "€", "5,60", 5.60);
            assertIsExpectedPrice(null, "29,50 zł", "zł", "29,50", 29.50);
            assertIsExpectedPrice(null, "2 990", null, "2 990", 2990);
            assertIsExpectedPrice(null, "0,00", null, "0,00", 0);
            assertIsExpectedPrice(null, "$24.99 with card", "$", "24.99", 24.99);
            assertIsExpectedPrice(null, "18,00€", "€", "18,00", 18);
            assertIsExpectedPrice(null, "€600,00", "€", "600,00", 600);
            assertIsExpectedPrice(null, "£25.00 (tax incl.)", "£", "25.00", 25);
            assertIsExpectedPrice(null, "8,55 €", "€", "8,55", 8.55);
            assertIsExpectedPrice(null, "1,422.50", null, "1,422.50", 1422.50);
            assertIsExpectedPrice(null, "244,00 €", "€", "244,00", 244.00);
            assertIsExpectedPrice(null, "12,90 €", "€", "12,90", 12.90);
            assertIsExpectedPrice(null, "12 900,00 руб", "руб", "12 900,00", 12900);
            assertIsExpectedPrice(null, "1.727 Ft", "Ft", "1.727", 1727);
            assertIsExpectedPrice(null, "79,00 €", "€", "79,00", 79);
            assertIsExpectedPrice(null, "NZD $100.70", "NZD", "100.70", 100.70);
            assertIsExpectedPrice(null, "479.00", null, "479.00", 479.00);
            assertIsExpectedPrice(null, "$ 69.00", "$", "69.00", 69.00);
            assertIsExpectedPrice(null, "135,00 €", "€", "135,00", 135.00);
            assertIsExpectedPrice(null, "25.00", null, "25.00", 25.0);
            assertIsExpectedPrice(null, "94,90 €", "€", "94,90", 94.90);
            assertIsExpectedPrice(null, "149.99", null, "149.99", 149.99);
            assertIsExpectedPrice(null, "44,00 €", "€", "44,00", 44.00);
            assertIsExpectedPrice(null, "$24.99", "$", "24.99", 24.99);
            assertIsExpectedPrice(null, "22,00 EUR", "EUR", "22,00", 22.00);
            assertIsExpectedPrice(null, "89,90 €", "€", "89,90", 89.90);
            assertIsExpectedPrice(null, "$24.95", "$", "24.95", 24.95);
            assertIsExpectedPrice(null, "£ 1.99", "£", "1.99", 1.99);
            assertIsExpectedPrice(null, "1 099,00 zł", "zł", "1 099,00", 1099);
            assertIsExpectedPrice(null, "běžná cena 28 270,00 Kč", "Kč", "28 270,00", 28270);
            assertIsExpectedPrice(null, "da € 72.00", "€", "72.00", 72.00);
            assertIsExpectedPrice(null, "$15.95", "$", "15.95", 15.95);
            assertIsExpectedPrice(null, "تومان56,000", "تومان", "56,000", 56000);
            assertIsExpectedPrice(null, "$1,695.00", "$", "1,695.00", 1695.00);
            assertIsExpectedPrice(null, "£595.00", "£", "595.00", 595.00);
            assertIsExpectedPrice(null, "$11.95", "$", "11.95", 11.95);
            assertIsExpectedPrice(null, "290,00 Kč", "Kč", "290,00", 290);
            assertIsExpectedPrice(null, "199.90 Fr.", "Fr.", "199.90", 199.90);
            assertIsExpectedPrice(null, "197 PLN", "PLN", "197", 197);
            assertIsExpectedPrice(null, "9.99", null, "9.99", 9.99);
            assertIsExpectedPrice(null, "$56.00", "$", "56.00", 56.00);
            assertIsExpectedPrice(null, "4 980 Kč", "Kč", "4 980", 4980);
            assertIsExpectedPrice(null, "124,00 €", "€", "124,00", 124);
            assertIsExpectedPrice(null, "$104.99", "$", "104.99", 104.99);
            assertIsExpectedPrice(null, "39,00 €", "€", "39,00", 39);
            assertIsExpectedPrice(null, "1 029,00 €", "€", "1 029,00", 1029);
            assertIsExpectedPrice(null, "Běžná cena 299,00 Kč", "Kč", "299,00", 299);
            assertIsExpectedPrice(null, "745,00 €", "€", "745,00", 745);
            assertIsExpectedPrice(null, "$89.00", "$", "89.00", 89);
            assertIsExpectedPrice(null, "$29.95", "$", "29.95", 29.95);
            assertIsExpectedPrice(null, "2.00", null, "2.00", 2.00);
            assertIsExpectedPrice(null, "249.99", null, "249.99", 249.99);
            assertIsExpectedPrice(null, "24.99", null, "24.99", 24.99);
            assertIsExpectedPrice(null, "1 499 Kč", "Kč", "1 499", 1499);
            assertIsExpectedPrice(null, "199,95 €", "€", "199,95", 199.95);
            assertIsExpectedPrice(null, "6,00 €", "€", "6,00", 6);
            assertIsExpectedPrice(null, "$28.49", "$", "28.49", 28.49);
            assertIsExpectedPrice(null, "200.000 đ", "đ", "200.000", 200000);
            assertIsExpectedPrice(null, "9,24 €", "€", "9,24", 9.24);
            assertIsExpectedPrice(null, "48,00 €", "€", "48,00", 48.00);
            assertIsExpectedPrice(null, "Cena : 890 Kč", "Kč", "890", 890);
            assertIsExpectedPrice(null, "790.00", null, "790.00", 790.00);
            assertIsExpectedPrice(null, "17 260 руб.", "руб.", "17 260", 17260);
            assertIsExpectedPrice(null, "227,000 تومان", "تومان", "227,000", 227000);
            assertIsExpectedPrice(null, "295,88 €", "€", "295,88", 295.88);
            assertIsExpectedPrice(null, "£1399", "£", "1399", 1399);
            assertIsExpectedPrice(null, "11,33 Br", "Br", "11,33", 11.33);
            assertIsExpectedPrice(null, "325.95", null, "325.95", 325.95);
            assertIsExpectedPrice(null, "$19.50", "$", "19.50", 19.50);
            assertIsExpectedPrice(null, "19,00 €", "€", "19,00", 19);
            assertIsExpectedPrice(null, "2 999,00 €", "€", "2 999,00", 2999);
            assertIsExpectedPrice(null, "49.95", null, "49.95", 49.95);
            assertIsExpectedPrice(null, "99 LEI", "LEI", "99", 99);
            assertIsExpectedPrice(null, "249 Kč", "Kč", "249", 249);
            assertIsExpectedPrice(null, "3.79", null, "3.79", 3.79);
            assertIsExpectedPrice(null, "běžná cena 890 Kč", "Kč", "890", 890);
            assertIsExpectedPrice(null, "$809,000", "$", "809,000", 809000);
            assertIsExpectedPrice(null, "450 000 ₫", "₫", "450 000", 450000);
            assertIsExpectedPrice(null, "30,00 €", "€", "30,00", 30.00);
            assertIsExpectedPrice(null, "14.95", null, "14.95", 14.95);
            assertIsExpectedPrice(null, "12.50", null, "12.50", 12.50);
            assertIsExpectedPrice(null, "129,00 € (-15%)", "€", "129,00", 129.00);
            assertIsExpectedPrice(null, "12,90 €", "€", "12,90", 12.90);
            assertIsExpectedPrice(null, "A partir de 11,70 €", "€", "11,70", 11.70);
            assertIsExpectedPrice(null, "15.49", null, "15.49", 15.49);
            assertIsExpectedPrice(null, "12.34 €", "€", "12.34", 12.34);
            assertIsExpectedPrice(null, "€799,00", "€", "799,00", 799);
            assertIsExpectedPrice(null, "230 лв.", "лв.", "230", 230);
            assertIsExpectedPrice(null, "14.55 €", "€", "14.55", 14.55);
            assertIsExpectedPrice(null, "133,86 LEI", "LEI", "133,86", 133.86);
            assertIsExpectedPrice(null, "7 990,00 Kč", "Kč", "7 990,00", 7990);
            assertIsExpectedPrice(null, "350.00", null, "350.00", 350.00);
            assertIsExpectedPrice(null, "Cena: 55,72 zł brutto", "zł", "55,72", 55.72);
            assertIsExpectedPrice(null, "O blenderach Omniblend", null, null, null);
            assertIsExpectedPrice(null, "3,822.00", null, "3,822.00", 3822);
            assertIsExpectedPrice(null, "0,15 €", "€", "0,15", 0.15);
            assertIsExpectedPrice(null, "430,00 €", "€", "430,00", 430);
            assertIsExpectedPrice(null, "$29.00", "$", "29.00", 29.00);
            assertIsExpectedPrice(null, "39.99", null, "39.99", 39.99);
            assertIsExpectedPrice(null, "$15.00", "$", "15.00", 15.00);
            assertIsExpectedPrice(null, "21,00 Lei", "Lei", "21,00", 21.00);
            assertIsExpectedPrice(null, "naše cena 250,00 Kč", "Kč", "250,00", 250.00);
            assertIsExpectedPrice(null, "$24.95", "$", "24.95", 24.95);
            assertIsExpectedPrice(null, "162.18", null, "162.18", 162.18);
            assertIsExpectedPrice(null, "39,60 EUR", "EUR", "39,60", 39.60);
            assertIsExpectedPrice(null, "10,75 €", "€", "10,75", 10.75);
            assertIsExpectedPrice(null, "219 руб.", "руб.", "219", 219);
            assertIsExpectedPrice(null, "89,00 € *", "€", "89,00", 89.00);
            assertIsExpectedPrice(null, "151,200 تومان", "تومان", "151,200", 151200);
            assertIsExpectedPrice(null, "$159.99", "$", "159.99", 159.99);
            assertIsExpectedPrice(null, "2.49", null, "2.49", 2.49);
            assertIsExpectedPrice(null, "7.38", null, "7.38", 7.38);
            assertIsExpectedPrice(null, "62,00 zł", "zł", "62,00", 62.00);
            assertIsExpectedPrice(null, "$20.00", "$", "20.00", 20);
            assertIsExpectedPrice(null, "$ 50.00", "$", "50.00", 50);
            assertIsExpectedPrice(null, "34.99", null, "34.99", 34.99);
            assertIsExpectedPrice(null, "318,00 €", "€", "318,00", 318);
            assertIsExpectedPrice(null, "11.499,00 EUR", "EUR", "11.499,00", 11499);
            assertIsExpectedPrice(null, "571.12坪", null, "571.12", 571.12);
            assertIsExpectedPrice(null, "€ 75.00", "€", "75.00", 75.00);
            assertIsExpectedPrice(null, "11,90 € *", "€", "11,90", 11.90);
            assertIsExpectedPrice(null, "€0.51", "€", "0.51", 0.51);
            assertIsExpectedPrice(null, "6,50 €", "€", "6,50", 6.50);
            assertIsExpectedPrice(null, "790 Kč", "Kč", "790", 790);
            assertIsExpectedPrice(null, "ab 2.99 €", "€", "2.99", 2.99);
            assertIsExpectedPrice(null, "369", null, "369", 369);
            assertIsExpectedPrice(null, "134.96", null, "134.96", 134.96);
            assertIsExpectedPrice(null, "135 lei", "lei", "135", 135);
            assertIsExpectedPrice(null, "2,99 € *", "€", "2,99", 2.99);
            assertIsExpectedPrice(null, "$9.99", "$", "9.99", 9.99);
            assertIsExpectedPrice(null, "2.950,00 €", "€", "2.950,00", 2950);
            assertIsExpectedPrice(null, "19.99", null, "19.99", 19.99);
            assertIsExpectedPrice(null, "49 lei", "lei", "49", 49);
            assertIsExpectedPrice(null, "31,07 € (bez DPH)", "€", "31,07", 31.07);
            assertIsExpectedPrice(null, "56.00", null, "56.00", 56.00);
            assertIsExpectedPrice(null, "54.95", null, "54.95", 54.95);
            assertIsExpectedPrice(null, "$ 80.00", "$", "80.00", 80.00);
            assertIsExpectedPrice(null, "$39.00", "$", "39.00", 39.00);
            assertIsExpectedPrice(null, "Rp 221.000", "Rp", "221.000", 221000);
            assertIsExpectedPrice(null, "35,90 EUR", "EUR", "35,90", 35.90);
            assertIsExpectedPrice(null, "4 835,50 €", "€", "4 835,50", 4835.50);
            assertIsExpectedPrice(null, "75,00€", "€", "75,00", 75);
            assertIsExpectedPrice(null, "$21.95", "$", "21.95", 21.95);
            assertIsExpectedPrice(null, "737,00", null, "737,00", 737);
            assertIsExpectedPrice(null, "129,00 € **", "€", "129,00", 129);
            assertIsExpectedPrice(null, "2 399 Kč", "Kč", "2 399", 2399);
            assertIsExpectedPrice(null, "430 руб", "руб", "430", 430);
            assertIsExpectedPrice(null, "69.95", null, "69.95", 69.95);
            assertIsExpectedPrice(null, "$0.00", "$", "0.00", 0);
            assertIsExpectedPrice(null, "49.56", null, "49.56", 49.56);
            assertIsExpectedPrice(null, "0,00 EUR", "EUR", "0,00", 0);
            assertIsExpectedPrice(null, "145,00 Kč", "Kč", "145,00", 145);
            assertIsExpectedPrice(null, "99,00 lei", "lei", "99,00", 99);
            assertIsExpectedPrice(null, "$750,000", "$", "750,000", 750000);
            assertIsExpectedPrice(null, "$49.99", "$", "49.99", 49.99);
            assertIsExpectedPrice(null, "29.00", null, "29.00", 29.00);
            assertIsExpectedPrice(null, "$7.20", "$", "7.20", 7.20);
            assertIsExpectedPrice(null, "69.00", null, "69.00", 69.00);
            assertIsExpectedPrice(null, "4.47", null, "4.47", 4.47);
            assertIsExpectedPrice(null, "39,90 € *", "€", "39,90", 39.90);
            assertIsExpectedPrice(null, "469,00 €", "€", "469,00", 469);
            assertIsExpectedPrice(null, "24.38", null, "24.38", 24.38);
            assertIsExpectedPrice(null, "6,24", null, "6,24", 6.24);
            assertIsExpectedPrice(null, "$89.00", "$", "89.00", 89.00);
            assertIsExpectedPrice(null, "24,35 €", "€", "24,35", 24.35);
            assertIsExpectedPrice(null, "Pris från 805 kr", "kr", "805", 805);
            assertIsExpectedPrice(null, "295 Kč", "Kč", "295", 295);
            assertIsExpectedPrice(null, "175.00", null, "175.00", 175.00);
            assertIsExpectedPrice(null, "7 990 kr", "kr", "7 990", 7990);
            assertIsExpectedPrice(null, "14,00 €", "€", "14,00", 14);
            assertIsExpectedPrice(null, "249 Kč", "Kč", "249", 249);
            assertIsExpectedPrice(null, "£39.95", "£", "39.95", 39.95);
            assertIsExpectedPrice(null, "10,75 TL", "TL", "10,75", 10.75);
            assertIsExpectedPrice(null, "$25.00", "$", "25.00", 25.00);
            assertIsExpectedPrice(null, "1 720,00 zł", "zł", "1 720,00", 1720);
            assertIsExpectedPrice(null, "běžná cena 749 Kč", "Kč", "749", 749);
            assertIsExpectedPrice(null, "425,00 €", "€", "425,00", 425);
            assertIsExpectedPrice(null, "59.00", null, "59.00", 59.00);
            assertIsExpectedPrice(null, "1,120.00", null, "1,120.00", 1120);
            assertIsExpectedPrice(null, "a partire da 7,32 € *", "€", "7,32", 7.32);
            assertIsExpectedPrice(null, "148.50 Inc GST", null, "148.50", 148.50);
            assertIsExpectedPrice(null, "7.49", null, "7.49", 7.49);
            assertIsExpectedPrice(null, "80.00", null, "80.00", 80.00);
            assertIsExpectedPrice(null, "93 499 Kč", "Kč", "93 499", 93499);
            assertIsExpectedPrice(null, "1.599,00 € *", "€", "1.599,00", 1599);
            assertIsExpectedPrice(null, "ab 3,63 EUR", "EUR", "3,63", 3.63);
            assertIsExpectedPrice(null, "29,90 EUR", "EUR", "29,90", 29.90);
            assertIsExpectedPrice(null, "$3.95", "$", "3.95", 3.95);
            assertIsExpectedPrice(null, "3430 лв.", "лв.", "3430", 3430);
            assertIsExpectedPrice(null, "724,00 €", "€", "724,00", 724);
            assertIsExpectedPrice(null, "18,00 €", "€", "18,00", 18);
            assertIsExpectedPrice(null, "6,75 €", "€", "6,75", 6.75);
            assertIsExpectedPrice(null, "29,90 € *", "€", "29,90", 29.90);
            assertIsExpectedPrice(null, "135.99", null, "135.99", 135.99);
            assertIsExpectedPrice(null, "30,000 تومان", "تومان", "30,000", 30000);
            assertIsExpectedPrice(null, "1 500 Kč", "Kč", "1 500", 1500);
            assertIsExpectedPrice(null, "349,00 €", "€", "349,00", 349);
            assertIsExpectedPrice(null, "$250.00", "$", "250.00", 250.00);
            assertIsExpectedPrice(null, "44.95", null, "44.95", 44.95);
            assertIsExpectedPrice(null, "$22.75", "$", "22.75", 22.75);
            assertIsExpectedPrice(null, "250,00 €", "€", "250,00", 250);
            assertIsExpectedPrice(null, "14.96 €", "€", "14.96", 14.96);
            assertIsExpectedPrice(null, "$4,350.00", "$", "4,350.00", 4350);
            assertIsExpectedPrice(null, "379 Kč", "Kč", "379", 379);
            assertIsExpectedPrice(null, "19,50 EUR", "EUR", "19,50", 19.5);
            assertIsExpectedPrice(null, "33,68 zł", "zł", "33,68", 33.68);
            assertIsExpectedPrice(null, "6.70€", "€", "6.70", 6.70);
            assertIsExpectedPrice(null, "$29.99", "$", "29.99", 29.99);
            assertIsExpectedPrice(null, "6.50", null, "6.50", 6.50);
        }
        [Test]
        public void TestPriceExtractionWithCurrencyHint_3()
        {
            assertIsExpectedPrice("R$", "R$ 139,99 R$ 135,99", "R$", "139,99", 139.99);
            assertIsExpectedPrice("£", "£ 34.99", "£", "34.99", 34.99);
            assertIsExpectedPrice("Price", "$7.65", "$", "7.65", 7.65);
            assertIsExpectedPrice("€", "75,00", "€", "75,00", 75);
            assertIsExpectedPrice(null, "34,90 €", "€", "34,90", 34.90);
            assertIsExpectedPrice(null, "629.95", null, "629.95", 629.95);
            assertIsExpectedPrice("11000 руб.", "47700 руб.", "руб.", "47700", 47700);
            assertIsExpectedPrice("$29.99 – $74.99", "$29.99", "$", "29.99", 29.99);
            assertIsExpectedPrice(null, "174,00 €", "€", "174,00", 174);
            assertIsExpectedPrice(null, "18,00 €", "€", "18,00", 18);
            assertIsExpectedPrice("Price:", "$19.50", "$", "19.50", 19.50);
            assertIsExpectedPrice("8 390 руб.", "8 390 руб.", "руб.", "8 390", 8390);
            assertIsExpectedPrice(null, "55,00 €", "€", "55,00", 55);
            assertIsExpectedPrice("€333.00", "€299.71", "€", "299.71", 299.71);
            assertIsExpectedPrice(null, "384,00 €", "€", "384,00", 384);
            assertIsExpectedPrice("From:", "From: $14.97", "$", "14.97", 14.97);
            assertIsExpectedPrice(null, "0,00 €", "€", "0,00", 0);
            assertIsExpectedPrice(null, "€ 280,00", "€", "280,00", 280);
            assertIsExpectedPrice(null, "11 450 Kč", "Kč", "11 450", 11450);
            assertIsExpectedPrice("Price $118.15", "$118.15", "$", "118.15", 118.15);
            assertIsExpectedPrice("€", "49.99", "€", "49.99", 49.99);
            assertIsExpectedPrice("1,15 €", "1,15 €", "€", "1,15", 1.15);
            assertIsExpectedPrice("17,99 €", "31,93 €", "€", "31,93", 31.93);
            assertIsExpectedPrice(null, "र24,401", "र", "24,401", 24401);
            assertIsExpectedPrice(null, "$60.00", "$", "60.00", 60);
            assertIsExpectedPrice("12,15 €", "12,15 €", "€", "12,15", 12.15);
            assertIsExpectedPrice("£ 163.95", "163.95", "£", "163.95", 163.95);
            assertIsExpectedPrice(null, "30,00 €", "€", "30,00", 30);
            assertIsExpectedPrice("zł", "165,00 zł", "zł", "165,00", 165);
            assertIsExpectedPrice("469.00zł Bez podatku: 381.30zł", "469.00zł", "zł", "469.00", 469);
            assertIsExpectedPrice(null, "72.95", null, "72.95", 72.95);
            assertIsExpectedPrice("Costo: $2,222.- Más IVA", "MX$3,179.00", "MX$", "3,179.00", 3179);
            assertIsExpectedPrice(null, "naše cena 4 370 Kč", "Kč", "4 370", 4370);
            assertIsExpectedPrice("€", "21,33 €", "€", "21,33", 21.33);
            assertIsExpectedPrice(null, "49.95", null, "49.95", 49.95);
            assertIsExpectedPrice(null, "Před slevou 59 900 Kč", "Kč", "59 900", 59900);
            assertIsExpectedPrice("ab", "6,78 € *", "€", "6,78", 6.78);
            assertIsExpectedPrice(null, "442", null, "442", 442);
            assertIsExpectedPrice("18.10 €", "16.00 €", "€", "16.00", 16.00);
            assertIsExpectedPrice(null, "0.00", null, "0.00", 0.00);
            assertIsExpectedPrice(null, "379,00 € *", "€", "379,00", 379.00);
            assertIsExpectedPrice(null, "125.00", null, "125.00", 125.00);
            assertIsExpectedPrice(null, "£ 30.84", "£", "30.84", 30.84);
            assertIsExpectedPrice(null, "259,00 €", "€", "259,00", 259);
            assertIsExpectedPrice("à partir de 1540 € / pers", "1540 €", "€", "1540", 1540);
            assertIsExpectedPrice(null, "95 €", "€", "95", 95);
            assertIsExpectedPrice(null, "53.79", null, "53.79", 53.79);
            assertIsExpectedPrice("NT$", "NT$ 1,160", "NT$", "1,160", 1160);
            assertIsExpectedPrice("ACTIVE", "$69,900", "$", "69,900", 69900);
            assertIsExpectedPrice(null, "$14.95", "$", "14.95", 14.95);
            assertIsExpectedPrice("₹", "₹ 4649", "₹", "4649", 4649);
            assertIsExpectedPrice("25 грн", "25 грн", "грн", "25", 25);
            assertIsExpectedPrice("€", "16,40", "€", "16,40", 16.40);
            assertIsExpectedPrice("PLN", "0,46", "PLN", "0,46", 0.46);
            assertIsExpectedPrice("£", "£ 261.25", "£", "261.25", 261.25);
            assertIsExpectedPrice(null, "$0.00", "$", "0.00", 0);
            assertIsExpectedPrice(null, "24.95", null, "24.95", 24.95);
            assertIsExpectedPrice("грн.", "27.00", "грн.", "27.00", 27.00);
            assertIsExpectedPrice("New", "$189,900", "$", "189,900", 189900);
            assertIsExpectedPrice("NA", "$269", "$", "269", 269);
            assertIsExpectedPrice("$279", "$189", "$", "189", 189);
            assertIsExpectedPrice(null, "160,00 zł", "zł", "160,00", 160);
            assertIsExpectedPrice("2 069 рублей", "2 400", "руб", "2 400", 2400);
            assertIsExpectedPrice("Sale Price: $4.59", "$4.59", "$", "4.59", 4.59);
            assertIsExpectedPrice("Купить", "542 руб.", "руб.", "542", 542);
            assertIsExpectedPrice(null, "$19.99", "$", "19.99", 19.99);
            assertIsExpectedPrice("Price", "$6.45", "$", "6.45", 6.45);
            assertIsExpectedPrice(null, "32.99", null, "32.99", 32.99);
            assertIsExpectedPrice(null, "$86.44", "$", "86.44", 86.44);
            assertIsExpectedPrice(null, "25.00€", "€", "25.00", 25.00);
            assertIsExpectedPrice(null, "99,00 €", "€", "99,00", 99.00);
            assertIsExpectedPrice(null, "103.90", null, "103.90", 103.90);
            assertIsExpectedPrice("14,00 € *", "25,00 € *", "€", "25,00", 25.00);
            assertIsExpectedPrice(null, "$6.49", "$", "6.49", 6.49);
            assertIsExpectedPrice("€ 59,95", "€ 59,95", "€", "59,95", 59.95);
            assertIsExpectedPrice(null, "Běžná cena 75 990,00 Kč", "Kč", "75 990,00", 75990);
            assertIsExpectedPrice("Price", "Rp 1.550.000", "Rp", "1.550.000", 1550000);
            assertIsExpectedPrice("грн.", "1 430", "грн.", "1 430", 1430);
            assertIsExpectedPrice("руб. (шт)", "1 690,54 руб. (шт)", "руб.", "1 690,54", 1690.54);
            assertIsExpectedPrice("69 TL 41.90 TL", "69 TL 41.90 TL", "TL", "69", 69);
            assertIsExpectedPrice("ALIDAD", "960,00 €", "€", "960,00", 960);
            assertIsExpectedPrice(null, "184,35 lei", "lei", "184,35", 184.35);
            assertIsExpectedPrice(null, "1 505 Kč", "Kč", "1 505", 1505);
            assertIsExpectedPrice(null, "23,00 € *", "€", "23,00", 23);
            assertIsExpectedPrice(null, "25.97", null, "25.97", 25.97);
            assertIsExpectedPrice(null, "58,19 €", "€", "58,19", 58.19);
            assertIsExpectedPrice(null, "27.00 лв.", "лв.", "27.00", 27.00);
            assertIsExpectedPrice("48,00 €", "3,85 €", "€", "3,85", 3.85);
            assertIsExpectedPrice(null, "10,90 €", "€", "10,90", 10.90);
            assertIsExpectedPrice("$ 879.0", "$ 879.0", "$", "879.0", 879.0);
            assertIsExpectedPrice("EUR", "25.88", "EUR", "25.88", 25.88);
            assertIsExpectedPrice(null, "R$215,10", "R$", "215,10", 215.10);
            assertIsExpectedPrice("£", "£ 12.50", "£", "12.50", 12.50);
            assertIsExpectedPrice(null, "3 173,00 €", "€", "3 173,00", 3173);
            assertIsExpectedPrice(null, "34,94 € *", "€", "34,94", 34.94);
            assertIsExpectedPrice(null, "Ops!", null, null, null);
            assertIsExpectedPrice(null, "392. 00", null, "392. 00", 392);
            assertIsExpectedPrice("€", "213,62", "€", "213,62", 213.62);
            assertIsExpectedPrice("3,00 €", "3,00 €", "€", "3,00", 3);
            assertIsExpectedPrice("£0.00", "£0.00", "£", "0.00", 0.00);
            assertIsExpectedPrice("€", "10 990,00", "€", "10 990,00", 10990);
            assertIsExpectedPrice(null, "€ 24,95", "€", "24,95", 24.95);
            assertIsExpectedPrice(null, "Not Available", null, null, null);
            assertIsExpectedPrice(null, "$19.99", "$", "19.99", 19.99);
            assertIsExpectedPrice("Р", "15 130 Р", "Р", "15 130", 15130);
            assertIsExpectedPrice("$5.95", "$5.95", "$", "5.95", 5.95);
            assertIsExpectedPrice(null, "199,99 €", "€", "199,99", 199.99);
            assertIsExpectedPrice("Code", "£23.40", "£", "23.40", 23.40);
            assertIsExpectedPrice("$29.99", "$29.99", "$", "29.99", 29.99);
            assertIsExpectedPrice(null, "795", null, "795", 795);
            assertIsExpectedPrice("Sorry, this item is currently out of stock but you can still order, we will send as soon a product arrives", "34.99", null, "34.99", 34.99);
            assertIsExpectedPrice("Our Price: $149.95", "Our Price: $149.95", "$", "149.95", 149.95);
            assertIsExpectedPrice("$119.95", "$119.95", "$", "119.95", 119.95);
            assertIsExpectedPrice(null, "339 грн", "грн", "339", 339);
            assertIsExpectedPrice("$0.00", "$0.00", "$", "0.00", 0.00);
            assertIsExpectedPrice("€", "79,00", "€", "79,00", 79.00);
            assertIsExpectedPrice(null, "378.00", null, "378.00", 378.00);
            assertIsExpectedPrice(null, "Pure & IP BP Ph. Eur. USP ACS AR LR", null, null, null);
            assertIsExpectedPrice(null, "$356.03", "$", "356.03", 356.03);
            assertIsExpectedPrice("naše cena", "běžná cena 890 Kč", "Kč", "890", 890);
            assertIsExpectedPrice(null, "$49.99", "$", "49.99", 49.99);
            assertIsExpectedPrice(null, "5 550 Kč", "Kč", "5 550", 5550);
            assertIsExpectedPrice(null, "5 770 Kč", "Kč", "5 770", 5770);
            assertIsExpectedPrice(null, "Free!", null, "0", 0);
            assertIsExpectedPrice("194 ₹", "199 ₹", "₹", "199", 199);
            assertIsExpectedPrice("5€", "16,50 € *", "€", "16,50", 16.50);
            assertIsExpectedPrice(null, "$42.95", "$", "42.95", 42.95);
            assertIsExpectedPrice(null, "1.837, 32 €", "€", "1.837, 32", 1837.32);
            assertIsExpectedPrice("$", "$ 791.00 $ 479.00", "$", "791.00", 791.00);
            assertIsExpectedPrice(null, "$69.30", "$", "69.30", 69.30);
            assertIsExpectedPrice(null, "$163,900", "$", "163,900", 163900);
            assertIsExpectedPrice(null, "36.95", null, "36.95", 36.95);
            assertIsExpectedPrice("Rp 235.000", "Rp 235.000", "Rp", "235.000", 235000);
            assertIsExpectedPrice("£", "11,13 €", "€", "11,13", 11.13);
            assertIsExpectedPrice(null, "160,00 lei", "lei", "160,00", 160);
            assertIsExpectedPrice("3 300 руб", "3 300 руб", "руб", "3 300", 3300);
            assertIsExpectedPrice("Р", "4 690 Р", "Р", "4 690", 4690);
            assertIsExpectedPrice("189,00 € *", "189,00 € *", "€", "189,00", 189);
            assertIsExpectedPrice("€", null, "€", null, null);
            assertIsExpectedPrice("$ 30.00", "$ 30.00", "$", "30.00", 30.00);
            assertIsExpectedPrice("$", "$ 5.95", "$", "5.95", 5.95);
            assertIsExpectedPrice("£62.90", "£74.00", "£", "74.00", 74.00);
            assertIsExpectedPrice(null, "158,24 €", "€", "158,24", 158.24);
            assertIsExpectedPrice(null, "550,00 лв", "лв", "550,00", 550);
            assertIsExpectedPrice("7,25 € *", "7,25 € *", "€", "7,25", 7.25);
            assertIsExpectedPrice(null, "94,000 تومان", "تومان", "94,000", 94000);
            assertIsExpectedPrice(null, "$8.27", "$", "8.27", 8.27);
            assertIsExpectedPrice("Đã có VAT", "12.500 ₫", "₫", "12.500", 12500);
            assertIsExpectedPrice(null, "27.50", null, "27.50", 27.50);
            assertIsExpectedPrice("23.90", "23.90", null, "23.90", 23.90);
            assertIsExpectedPrice("Р", "18 000 Р", "Р", "18 000", 18000);
            assertIsExpectedPrice(null, "48,96 €", "€", "48,96", 48.96);
            assertIsExpectedPrice("DKK", "199 DKK", "DKK", "199", 199);
            assertIsExpectedPrice("Price: £6.95 - £9.95", "£6.95 - £9.95", "£", "6.95", 6.95);
            assertIsExpectedPrice(null, "599.97", null, "599.97", 599.97);
            assertIsExpectedPrice(null, "$40.00", "$", "40.00", 40.00);
            assertIsExpectedPrice("Cena 300,00 Kč", "100,00 Kč", "Kč", "100,00", 100);
            assertIsExpectedPrice("18,25 €", "18,25 €", "€", "18,25", 18.25);
            assertIsExpectedPrice(null, "29,00 €", "€", "29,00", 29);
            assertIsExpectedPrice("€", "€ 39,95", "€", "39,95", 39.95);
            assertIsExpectedPrice(null, "32.00", null, "32.00", 32.00);
            assertIsExpectedPrice(null, "32.99", null, "32.99", 32.99);
            assertIsExpectedPrice("HUF", "39000", "HUF", "39000", 39000);
            assertIsExpectedPrice(null, "850,000 ریال", "ریال", "850,000", 850000);
            assertIsExpectedPrice(null, "24,00 €", "€", "24,00", 24.00);
            assertIsExpectedPrice("Versand", "CHF 19.90", "CHF", "19.90", 19.90);
            assertIsExpectedPrice("", "530, 42 Zł", "Zł", "530, 42", 530.42);
        }

        //[Test]
        //public void TestPriceExtraction_XFail()
        //{
            //// Amount is picked as a price
            //assertIsExpectedPrice("3 Ausgaben für nur 14,85 EUR", "3 Ausgaben für nur 14,85 EUR", "EUR", "14,85", 14.85);
            //assertIsExpectedPrice(null, "Buy Now - 2 Litre Was $120.00 Now $60.00", "$", "60.00", 60);
            //assertIsExpectedPrice("Цена: уточняйте (мин. заказ: 1 )", "Цена: уточняйте (мин. заказ: 1 )", null, null, null);
            //assertIsExpectedPrice(null, "50 - $2.00 100 - $2.75 400 - $4.50 1,000 - $9.00 2,000 - $17.00 3,000 - $24.00 10,000 - $75.00", "$", "2.00", 2);

            //// No detection of such single-letter currencies
            //assertIsExpectedPrice("R273.00", "R273.00", "R", "273.00", 273);
            //assertIsExpectedPrice("R8,499", "R8,499", "R", "8,499", 8499);
            //assertIsExpectedPrice("Cuneo", "61.858 L", "L", "61.858", 61858); // Romanian New Leu

            //// "р" / "руб" is detected as currency
            //assertIsExpectedPrice(">", "См. цену в прайсе", null, null, null);
            //assertIsExpectedPrice("Купить", "Печная труба", null, null, null);

            //// Dates
            //assertIsExpectedPrice(null, "July, 2004", null, null, null);

            //assertIsExpectedPrice(null, "15.08.2017", null, null, null);

            //// Other incorrectly extracted prices
            //assertIsExpectedPrice("8.5", "25-09", null, null, null);

            //// Misc
            //assertIsExpectedPrice("of", "16.00 ft", null, null, null);
            //assertIsExpectedPrice("Free Shipping on Orders $49+.", "Free Shipping on Orders $49+.", "$", null, null);
        //}

        [Test]
        public void TestPriceExtraction_DecimalSeparatorExamples()
        {
            assertIsExpectedPrice(null, "1250€ 600", "€", "1250", 1250);
            assertIsExpectedPrice(null, "1250€ 60", "€", "1250€60", 1250.60);
            assertIsExpectedPrice(null, "1250€600", "€", "1250€600", 1250.600);
            assertIsExpectedPrice(null, ".75 €", "€", ".75", 0.75, EDecimalSeparatorStyle.American);
            assertIsExpectedPrice("$.75", "$.75", "$", ".75", 0.75, EDecimalSeparatorStyle.American);
            assertIsExpectedPrice("$..75", "$..75", "$", ".75", 0.75, EDecimalSeparatorStyle.American);

            // TO DO check if expected amounts for the following cases actually make sense
            //assertIsExpectedPrice("$..75,333", "$..75,333", "$", ".75,333", 0.75333, EDecimalSeparatorStyle.American);
            //assertIsExpectedPrice("$..75,333", "$..75,333", "$", ".75,333", 75.333, EDecimalSeparatorStyle.European);
            //assertIsExpectedPrice("$.750.30", "$.750.30", "$", "750.30", 750.30, EDecimalSeparatorStyle.American);
        }
    }
}